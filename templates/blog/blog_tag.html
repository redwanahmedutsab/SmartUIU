{% load static %}
<!doctype html>
<html lang="en">
{% include 'expendable/head.html' %}
<body id="top">
{% include 'expendable/chatbot_and_loading.html' %}

<div class="site-wrap">

    <div class="site-mobile-menu site-navbar-target">
        <div class="site-mobile-menu-header">
            <div class="site-mobile-menu-close mt-3">
                <span class="icon-close2 js-menu-toggle"></span>
            </div>
        </div>
        <div class="site-mobile-menu-body"></div>
    </div> <!-- .site-mobile-menu -->

    <!-- NAVBAR -->
    {% include 'expendable/navbar.html' %}

    <!-- HOME -->
    <section class="section-hero home-section overlay inner-page bg-image"
             style="background-image: url('{% static 'images/hero_1.jpg' %}');" id="home-section">

        <div class="container">
            <div class="row align-items-center justify-content-center">
                <div class="col-md-12 text-center">
                    <h1 class="text-white font-weight-bold">Found these based</h1>
                </div>
                <style>
                    .custom-btn {
                        font-size: 1.3rem;
                        padding: 15px 20px;
                        border-radius: 50px;
                        transition: transform 0.3s ease, background-color 0.3s ease;
                        letter-spacing: 1px;
                    }

                    .custom-btn:hover {
                        transform: scale(1.05);
                        box-shadow: 0 8px 15px rgba(0, 0, 0, 0.3);
                    }

                    .btn-warning {
                        background-color: #e0c9a5;
                        border: none;
                    }

                    .btn-warning:hover {
                        background-color: #e68900;
                    }

                    .btn-info {
                        background-color: #17a2b8;
                        border: none;
                    }

                    .btn-info:hover {
                        background-color: #138496;
                    }

                    /* Shadow effect for a more impactful design */
                    .shadow-lg {
                        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
                    }
                </style>

            </div>
        </div>
    </section>

    <section class="site-section" id="next">
        <div class="container">

            <!-- Search and Filter -->
{#            <form method="GET" action="{% url 'blog' %}">#}
{#                <div class="row mb-4">#}
{#                    <div class="col-md-4">#}
{#                        <input type="text" class="form-control" placeholder="Blog Title or Tags" name="search" id="search"#}
{#                               value="{{ search_term }}">#}
{#                    </div>#}
{##}
{#                    <div class="col-md-4">#}
{#                        <select class="form-control" name="sort" id="sort">#}
{#                            <option value="" {% if sort_order == "" %}selected{% endif %}>Sort by order</option>#}
{#                            <option value="new_to_old" {% if sort_order == "new_to_old" %}selected{% endif %}>New to Old</option>#}
{#                            <option value="old_to_new" {% if sort_order == "old_to_new" %}selected{% endif %}>Old to New</option>#}
{#                        </select>#}
{#                    </div>#}
{##}
{#                    <div class="col-md-4">#}
{#                        <input type="date" class="form-control" placeholder="Select Date" name="specific_date" id="specific_date"#}
{#                               value="{{ specific_date }}">  <!-- Updated to match the view parameter -->#}
{#                    </div>#}
{##}
{#                    <div class="col-md-12 mt-3 text-center">#}
{#                        <button type="submit" class="btn btn-primary">Search</button>#}
{#                        <button type="button" class="btn btn-secondary" onclick="resetFilters()">Reset</button>#}
{#                    </div>#}
{#                </div>#}
{#            </form>#}

            <!-- Title -->
            <div class="row mb-5 justify-content-center">
                <div class="col-md-7 text-center">
                    <h2 class="section-title mb-2">{{ blogs.count }} Blogs Found with "{{ tag }}"</h2>
                </div>
            </div>

            <div class="row">
                {% for blog in blogs %}
                    <div class="col-md-4 mb-4">
                        <div class="card h-100 shadow-sm border-0">
                            <div class="card-img-top">
                                {% if blog.photo %}
                                    <img src="{{ blog.photo.url }}" alt="Blog Image" class="img-fluid rounded-top"
                                         style="height: 300px; width: 500px; object-fit: cover; display: block; margin-left: auto; margin-right: auto;">
                                {% else %}
                                    <img src="{% static 'images/smartuiu.png' %}" alt="Default Image"
                                         class="img-fluid rounded-top"
                                         style="max-height: 250px; object-fit: cover; width: 100%;">
                                {% endif %}
                            </div>

                            <!-- Card Body -->
                            <div class="card-body p-4">
                                <h5 class="card-title font-weight-bold text-primary mb-3">{{ blog.title }}</h5>
                                <p class="card-text">
                                    <span class="text-muted">By:</span> <strong>{{ blog.author.get_full_name }}</strong><br>
                                    <span class="text-muted">Posted on:</span> {{ blog.created_at|date:"F d, Y" }}
                                </p>
                            </div>

                            <!-- Card Footer -->
                            <div class="card-footer bg-white d-flex justify-content-between align-items-center">
                                <a href="{% url 'blog_single' blog.id %}" class="btn btn-outline-primary btn-sm">
                                    <i class="fas fa-eye"></i> View Details
                                </a>
                                <span class="text-muted small">{{ blog.created_at|timesince }} ago</span>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>

            <!-- CSS Styles -->
            <style>
                .card:hover {
                    transform: translateY(-10px);
                    transition: transform 0.3s ease-in-out;
                }

                .card-title {
                    color: #007bff;
                    font-size: 1.25rem;
                    text-transform: capitalize;
                }

                .card-footer {
                    border-top: 1px solid #f0f0f0;
                    padding: 0.75rem 1.25rem;
                }

                .card-body p {
                    font-size: 0.9rem;
                    color: #6c757d;
                }

                .btn-outline-primary {
                    border-color: #007bff;
                    color: #007bff;
                }

                .btn-outline-primary:hover {
                    background-color: #007bff;
                    color: #fff;
                }
            </style>

            <!-- Pagination Section -->
            <div class="row pagination-wrap">
                <div class="col-md-6 text-center text-md-left mb-4 mb-md-0">
                    <span>Showing {{ items.count }} Of {{ blogs.count }} Items</span>
                </div>
                <div class="col-md-6 text-center text-md-right">
                    <div class="custom-pagination ml-auto">
                        {% if page_obj.has_previous %}
                            <a href="?page={{ page_obj.previous_page_number }}&search={{ search_term }}&sort={{ sort_order }}&specific_date={{ specific_date }}" class="prev">Prev</a>
                        {% endif %}
                        <div class="d-inline-block">
                            {% for num in page_obj.paginator.page_range %}
                                {% if page_obj.number == num %}
                                    <a href="#" class="active">{{ num }}</a>
                                {% else %}
                                    <a href="?page={{ num }}&search={{ search_term }}&sort={{ sort_order }}&specific_date={{ specific_date }}">{{ num }}</a>
                                {% endif %}
                            {% endfor %}
                        </div>
                        {% if page_obj.has_next %}
                            <a href="?page={{ page_obj.next_page_number }}&search={{ search_term }}&sort={{ sort_order }}&specific_date={{ specific_date }}" class="next">Next</a>
                        {% endif %}
                    </div>
                </div>
            </div>

        </div>
    </section>
    <section class="py-5 bg-image"
             style="background-image: url('{% static 'images/hero_1.jpg' %}');">
    </section>

    {% include 'expendable/footer.html' %}
</div>
{% include 'expendable/include.html' %}

<script>
    function resetFilters() {
        document.getElementById("search").value = "";
        document.getElementById("sort").selectedIndex = 0; // Reset to default
        document.getElementById("specific_date").value = ""; // Clear date input
        // Optionally, redirect to the same page without parameters
        window.location.href = "{% url 'blog' %}";
    }
</script>
</body>
</html>
